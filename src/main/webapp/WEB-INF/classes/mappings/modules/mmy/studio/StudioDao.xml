<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thinkgem.jeesite.modules.mmy.studio.dao.StudioDao">
	<select id="findList">
		select * from studio_info
		<where>
			del_flag=#{DEL_FLAG_NORMAL}
			<if test="lessionId!=null and lessionId!=''">
				and lession_id=#{lessionId}
			</if>
			<if test="pointer !=null and pointer!=''">
				and pointer=#{pointer}
			</if>
			<if test="classId !=null and classId!=''">
				and user_id in (select id from user where class_id=#{classId})
			</if>
			<if test="isPointed !=null and isPointed!=''">
				${isPointed}
			</if>
		</where>
	</select>
	<select id="get">
		select * from studio_info where id=#{id} and
		del_flag=#{DEL_FLAG_NORMAL}
	</select>
	<select id="getByLessionIdAndUserId">
		select * from studio_info where
		lession_id=#{lessionId} and user_id=#{userId} and
		del_flag=#{DEL_FLAG_NORMAL}
	</select>
	<update id="point">
		update studio_info set
		point=#{point},pointer=#{pointer},comment=#{comment}
		,point_time=#{pointTime} where id=#{id} and
		del_flag=#{DEL_FLAG_NORMAL}
	</update>
	<update id="delete">
		update studio_info set del_flag=#{DEL_FLAG_DELETE} where id=#{id}
	</update>

</mapper>